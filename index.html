<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#2c3e50">
  <meta name="description" content="Terminplaner für Lernentwicklungsgespräche in der Grundschule">

  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <title>Terminplaner</title>
</head>
<body>
  <div class="app-container">
    <!-- Navigation -->
    <nav class="navbar">
      <h1 class="logo">Terminplaner</h1>
      <ul class="nav-links">
        <li><a href="#" data-page="dashboard" class="active">Projekte</a></li>
        <li><a href="#" data-page="create">Neu</a></li>
      </ul>
    </nav>

    <!-- Hauptinhalt -->
    <main class="main-content">
      <!-- Dashboard -->
      <section id="page-dashboard" class="page active">
        <h2>Meine Projekte</h2>
        <div id="projects-list" class="projects-grid"></div>
        <p id="no-projects" class="empty-message" style="display: none;">
          Noch keine Projekte vorhanden.<br>
          <a href="#" data-page="create">Erstellen Sie Ihr erstes Projekt</a>
        </p>
      </section>

      <!-- Projekt erstellen -->
      <section id="page-create" class="page">
        <h2>Neues Projekt</h2>
        <form id="create-project-form" class="form-card">
          <div class="form-group">
            <label for="project-title">Titel *</label>
            <input type="text" id="project-title" placeholder="z.B. Lernentwicklungsgespräch 2a" required>
          </div>

          <div class="form-group">
            <label for="teacher-name">Lehrkraft</label>
            <input type="text" id="teacher-name" placeholder="z.B. Frau Müller">
          </div>

          <div class="form-group">
            <label for="deadline">Rückgabedatum</label>
            <input type="date" id="deadline">
          </div>

          <hr>

          <h3>Terminoptionen</h3>

          <div class="form-row">
            <div class="form-group">
              <label for="slot-date">Datum</label>
              <input type="date" id="slot-date">
            </div>
            <div class="form-group">
              <label for="slot-start">Von</label>
              <input type="time" id="slot-start" value="12:30">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="slot-end">Bis</label>
              <input type="time" id="slot-end" value="15:00">
            </div>
            <div class="form-group">
              <label for="slot-duration">Dauer (Min)</label>
              <input type="number" id="slot-duration" value="15" min="5" max="60">
            </div>
          </div>

          <div class="form-group" style="display: flex; gap: 0.5rem;">
            <button type="button" id="generate-slots-btn" class="btn btn-secondary">Termine generieren</button>
            <button type="button" id="add-slot-btn" class="btn btn-secondary">Einzeln hinzufügen</button>
          </div>

          <div id="time-slots-preview" class="time-slots-preview">
            <h4>Hinzugefügte Termine:</h4>
            <div id="time-slots-list">
              <p class="empty-hint">Noch keine Termine hinzugefügt</p>
            </div>
          </div>

          <button type="submit" class="btn btn-primary btn-large">Projekt erstellen</button>
        </form>
      </section>

      <!-- Projekt-Details -->
      <section id="page-project" class="page">
        <div class="project-header">
          <h2 id="project-detail-title">Projektname</h2>
          <div class="project-info">
            <p><strong>Lehrkraft:</strong> <span id="project-detail-teacher">-</span></p>
            <p><strong>Rückgabe bis:</strong> <span id="project-detail-deadline">-</span></p>
            <p><strong>Termine:</strong> <span id="project-detail-slots">-</span></p>
            <p><strong>Schüler:</strong> <span id="project-detail-students">-</span></p>
          </div>
          <div class="project-actions">
            <button id="btn-print" class="btn btn-secondary">Drucken</button>
            <button id="btn-manage-students" class="btn btn-secondary">Schüler</button>
            <button id="btn-assign" class="btn btn-primary">Zuweisen</button>
          </div>
        </div>

        <div id="assignments-section" class="assignments-section" style="display: none;">
          <h3>Terminzuweisungen</h3>
          <div id="assignments-list"></div>
          <div id="unassigned-list"></div>
        </div>
      </section>

      <!-- Schüler verwalten -->
      <section id="page-students" class="page">
        <h2>Schüler verwalten</h2>
        <button id="btn-back-to-project" class="btn btn-link">&larr; Zurück</button>

        <div class="form-card">
          <h3>Schüler hinzufügen</h3>
          <div class="form-group">
            <label for="student-names">Namen (einer pro Zeile)</label>
            <textarea id="student-names" rows="4" placeholder="Max Mustermann&#10;Anna Schmidt&#10;..."></textarea>
          </div>
          <button id="add-students-btn" class="btn btn-primary">Hinzufügen</button>
        </div>

        <h3>Schülerliste</h3>
        <table id="students-table" class="data-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Auswahl</th>
              <th>Termin</th>
              <th>Aktionen</th>
            </tr>
          </thead>
          <tbody id="students-tbody">
          </tbody>
        </table>
      </section>

      <!-- Termine auswählen -->
      <section id="page-slot-selection" class="page">
        <h2 id="slot-selection-title">Termine auswählen</h2>
        <button id="btn-back-from-slots" class="btn btn-link">&larr; Zurück</button>

        <div class="form-card">
          <div id="scan-preview-container" class="scan-preview-container"></div>

          <div class="scan-options">
            <button id="btn-open-camera" class="btn btn-secondary">Foto aufnehmen</button>
            <label class="btn btn-secondary" style="cursor: pointer;">
              Datei wählen
              <input type="file" id="scan-file-input" accept="image/*" style="display: none;">
            </label>
          </div>

          <h3>Termine ankreuzen:</h3>
          <div id="slots-checkboxes"></div>

          <button id="save-slots-btn" class="btn btn-primary btn-large" style="margin-top: 1rem;">Speichern</button>
        </div>
      </section>

      <!-- Druckansicht -->
      <section id="page-print" class="page print-page">
        <div class="print-controls no-print">
          <button id="btn-back-from-print" class="btn btn-link">&larr; Zurück</button>
          <button id="btn-do-print" class="btn btn-primary">Drucken</button>
        </div>
        <div id="print-content" class="print-content"></div>
      </section>
    </main>

    <!-- Kamera Overlay -->
    <div id="camera-container" class="camera-container">
      <video id="camera-video" autoplay playsinline></video>
      <div class="camera-controls">
        <button id="btn-capture" class="btn btn-primary">Aufnehmen</button>
        <button id="btn-close-camera" class="btn btn-secondary">Abbrechen</button>
      </div>
    </div>

    <!-- Footer mit DSGVO -->
    <footer class="app-footer no-print">
      <button id="btn-delete-all" class="btn btn-link btn-small" style="color: #e74c3c;">
        Alle Daten löschen (DSGVO)
      </button>
    </footer>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
